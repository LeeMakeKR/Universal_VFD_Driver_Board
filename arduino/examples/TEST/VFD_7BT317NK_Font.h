/*
 * VFD_7BT317NK_Font.h
 * 
 * Font table for 7BT317NK VFD display
 * Based on segment mapping from vfd-configs/font-maps/7BT317NK/font-table.md
 * 
 * Segment Layout: P0-P20 (21 segments total)
 * Each pattern is a 32-bit value where bits 0-20 represent segments P0-P20
 * 
 * Author: Generated from VFD Config Files
 * Date: August 2025
 * Version: 1.0
 */

#ifndef VFD_7BT317NK_FONT_H
#define VFD_7BT317NK_FONT_H

#include <Arduino.h>

// Font table structure
struct VFD_FontChar {
    char character;
    uint32_t pattern;    // 21-bit pattern for segments P0-P20
};

// Segment bit positions (P0=bit0, P1=bit1, ..., P20=bit20)
#define SEG_P0  (1UL << 0)
#define SEG_P1  (1UL << 1)
#define SEG_P2  (1UL << 2)
#define SEG_P3  (1UL << 3)
#define SEG_P4  (1UL << 4)
#define SEG_P5  (1UL << 5)
#define SEG_P6  (1UL << 6)
#define SEG_P7  (1UL << 7)
#define SEG_P8  (1UL << 8)
#define SEG_P9  (1UL << 9)
#define SEG_P10 (1UL << 10)
#define SEG_P11 (1UL << 11)
#define SEG_P12 (1UL << 12)
#define SEG_P13 (1UL << 13)
#define SEG_P14 (1UL << 14)
#define SEG_P15 (1UL << 15)
#define SEG_P16 (1UL << 16)
#define SEG_P17 (1UL << 17)
#define SEG_P18 (1UL << 18)
#define SEG_P19 (1UL << 19)
#define SEG_P20 (1UL << 20)

// Font table for 7BT317NK VFD
// Generated from vfd-configs/font-maps/7BT317NK/font-table.md
// Bit order: P0=LSB(bit0) ... P20=MSB(bit20)
// MSB First transmission: bit20 → bit19 → ... → bit1 → bit0
const VFD_FontChar VFD_7BT317NK_FONT_TABLE[] = {
    // Numbers (0-9)
    {'0', 0b001100110100001001010},    // 0|1|0|0|0|0|1|0|1|0|0|1|1|0|0|1|0|1|1|0|0
    {'1', 0b010000000000001000100},    // 0|0|1|0|0|0|0|1|0|0|0|0|0|0|0|1|0|0|0|1|0
    {'2', 0b011100001111000011010},    // 0|1|0|0|0|0|0|1|1|1|1|1|0|0|0|0|0|1|1|1|0
    {'3', 0b011000001010000001010},    // 0|1|0|0|0|0|0|1|0|1|1|0|0|0|0|1|0|1|1|0|0
    {'4', 0b010000001111000001100},    // 0|0|1|1|0|0|0|1|1|1|1|0|0|0|0|1|0|0|0|1|0
    {'5', 0b011110001110000000110},    // 0|1|0|1|0|0|0|0|1|1|1|0|0|0|0|1|1|1|1|0|0
    {'6', 0b011010001111000001110},    // 0|1|0|1|0|0|0|0|1|1|1|1|0|0|0|1|0|1|1|0|0
    {'7', 0b010000000000000001110},    // 0|1|0|1|0|0|0|1|0|0|0|0|0|0|0|1|0|0|0|1|0
    {'8', 0b011010101111000001110},    // 0|1|0|1|0|0|0|1|1|1|1|1|0|0|0|1|0|1|1|0|0
    {'9', 0b010000101111000001110},    // 0|1|0|1|0|0|0|1|1|1|1|0|0|0|0|1|0|0|0|1|0
    
    // Letters (A-Z)
    {'A', 0b010000101111001001110},    // 0|1|0|1|0|0|0|1|1|1|1|1|0|0|0|1|1|0|0|1|0
    {'B', 0b011000100101010001010},    // 0|1|0|0|0|1|0|1|0|1|1|0|0|1|0|1|0|1|1|0|0
    {'C', 0b011000000000100001110},    // 0|1|0|1|0|0|0|0|0|0|0|1|0|0|0|0|0|1|1|0|0
    {'D', 0b011000100100010001010},    // 0|1|0|0|0|1|0|1|0|1|0|0|0|1|0|1|0|1|1|0|0
    {'E', 0b011001000110000001111},    // 1|1|0|1|0|0|0|0|1|1|0|1|0|0|0|0|1|1|1|0|0
    {'F', 0b000001100110000001111},    // 1|1|1|1|0|0|0|0|1|1|0|1|0|0|0|0|1|0|0|0|0
    {'G', 0b011000000001000001110},    // 0|1|0|1|0|0|0|0|0|0|1|1|0|0|0|1|0|1|1|0|0
    {'H', 0b010001001111001001111},    // 1|0|1|1|0|0|0|1|1|1|1|1|0|0|0|1|1|0|0|1|0
    {'I', 0b011000100100010001010},    // 0|1|0|0|0|1|0|0|0|1|0|0|0|1|0|0|0|1|1|0|0
    {'J', 0b011000000000100000100},    // 0|0|1|0|0|0|0|1|0|0|0|1|0|0|0|1|0|1|1|0|0
    
    {'K', 0b010100110110100001111},    // 1|0|1|1|0|0|1|0|1|1|0|1|0|0|1|0|1|0|0|1|0
    {'L', 0b011110000000100000111},    // 1|0|0|1|0|0|0|0|0|0|0|1|0|0|0|0|1|1|1|1|0
    {'M', 0b010101101100100001111},    // 1|0|1|1|1|0|1|1|0|1|0|1|0|0|0|1|1|0|0|1|0
    {'N', 0b010101100101110001111},    // 1|0|1|1|1|0|0|1|0|1|0|1|0|0|1|1|1|0|0|1|0
    {'O', 0b011000100000100000110},    // 0|1|0|1|0|0|0|1|0|0|0|1|0|0|0|1|0|1|1|0|0
    {'P', 0b000000001111100000110},    // 0|1|0|1|0|0|0|1|1|1|1|1|0|0|0|0|1|0|0|0|0
    {'Q', 0b011000100000110000110},    // 0|1|0|1|0|0|0|1|0|0|0|1|0|0|1|1|0|1|1|0|0
    {'R', 0b010100101111110000111},    // 1|1|0|1|0|0|0|1|1|1|1|1|0|0|1|0|1|0|0|1|0
    
    {'S', 0b011110000110001110110},    // 0|1|1|0|1|0|0|0|0|1|1|0|0|0|0|1|1|1|1|0|0
    {'T', 0b000100100100010000111},    // 1|1|1|0|0|1|0|0|0|1|0|0|0|1|0|0|0|0|1|0|0
    {'U', 0b011000100000100000111},    // 1|0|1|1|0|0|0|1|0|0|0|1|0|0|0|1|0|1|1|0|0
    {'V', 0b000100001001100100111},    // 1|0|1|1|0|0|1|0|0|1|0|1|1|0|0|0|1|0|0|0|0
    {'W', 0b010101100110110100111},    // 1|0|1|1|0|0|0|1|0|1|0|1|1|0|1|1|1|0|0|1|0
    {'X', 0b010101010001101100111},    // 1|0|1|0|1|0|1|0|0|1|0|0|1|0|1|0|1|0|0|1|0
    {'Y', 0b000100000001000100111},    // 1|0|1|0|1|0|1|0|0|1|0|0|0|1|0|0|0|0|1|0|0
    {'Z', 0b011111000111100100111},    // 1|1|1|0|0|0|1|0|1|1|1|0|1|0|0|0|1|1|1|1|0
    
    // Special Characters
    {'+', 0b000001000111000100000},    // Plus sign
    {'-', 0b000000000111000000000},    // Minus sign
    {'*', 0b000010010111010100000},    // Asterisk
    {'/', 0b000000010010010000000},    // Forward slash
    {':', 0b100000000000000000000},    // Colon
    {'_', 0b000011110000000000000},    // Underscore
    {'.', 0b000000000000000000000},    // Period
    {' ', 0b000000000000000000000},    // Space
};

// Number of characters in font table
const uint8_t VFD_7BT317NK_FONT_SIZE = sizeof(VFD_7BT317NK_FONT_TABLE) / sizeof(VFD_FontChar);

// Helper function to find character pattern
// Font functions
uint32_t getCharacterPattern(char ch);

// Helper function to check if character is supported
bool isCharacterSupported(char ch);

// Print font table to serial (for debugging)
void printFontTable();

#endif // VFD_7BT317NK_FONT_H
